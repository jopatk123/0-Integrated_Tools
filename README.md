# 高德地图工具 - 个人版

一个基于高德地图API的个人使用工具，提供路径规划、地址查询、天气查询等功能。

## 功能特性

### 🗺️ 路径规划
- 驾车、步行、骑行、公交路径规划
- 支持WGS-84坐标自动转换为GCJ-02坐标
- 显示详细的路径步骤和预计时间
- 自动获取起点和终点地址信息

### 📍 地址服务
- 坐标转地址（逆地理编码）
- 地址转坐标（地理编码）
- 批量地址处理（Excel导入/导出）

### 🌤️ 天气查询
- 实时天气信息查询
- 支持城市名称或adcode查询

### 💾 个人化功能
- **收藏位置管理**：保存常用位置，快速选择
- **历史记录**：自动保存查询历史，支持快速重用
- **配置管理**：个性化设置，包括API密钥、缓存等
- **快速启动**：一键启动脚本，自动环境配置

## 安装和使用

### 前置要求

1. **Python 3.8+**
2. **uv包管理器** - [安装指南](https://docs.astral.sh/uv/getting-started/installation/)
3. **高德地图API密钥** - [申请地址](https://console.amap.com/dev/key/app)

### 快速开始

1. **克隆或下载项目**
   ```bash
   git clone <repository-url>
   cd Integrated_Tools
   ```

2. **使用快速启动脚本（推荐）**
   ```bash
   # Windows
   start_amap_tool.bat
   ```
   
   或手动启动：
   ```bash
   # 创建虚拟环境
   uv venv
   
   # 安装依赖
   uv pip install -r requirements.txt
   
   # 启动应用
   uv run python main.py
   ```

3. **配置API密钥**
   - 首次启动时会提示输入高德地图API密钥
   - 也可以在设置中随时修改

## 使用指南

### 路径规划

1. 在"路径规划"标签页中输入起点和终点坐标
2. 坐标格式：`经度,纬度`（如：`116.397428,39.90923`）
3. 点击"计算路径"获取结果
4. 可以使用"收藏位置"按钮快速选择常用位置

### 收藏位置管理

1. 点击"管理收藏"按钮
2. 添加新的收藏位置：输入名称和坐标
3. 删除不需要的收藏位置
4. 在路径规划时点击"收藏位置"快速选择

### 历史记录

1. 点击"历史记录"按钮查看所有查询历史
2. 支持删除单条记录或清空全部
3. 在位置选择对话框中可以快速重用历史位置

### 设置配置

1. 点击"设置"按钮
2. 配置API密钥
3. 调整缓存设置
4. 设置历史记录保留数量

## 配置文件

应用会自动创建以下配置文件：

- `config/config.yaml` - 主配置文件
- `config/history.json` - 历史记录文件

### 配置选项

```yaml
# API设置
amap_api_key: "your_api_key_here"

# 收藏位置
favorite_locations:
  家: "116.397428,39.90923"
  公司: "116.407526,39.90403"

# 常用城市
common_cities:
  - 北京
  - 上海
  - 广州

# UI设置
ui_settings:
  theme: "light"
  font_size: 12
  window_size: "800x600"

# 缓存设置
cache_enabled: true
cache_ttl_hours: 24

# 历史记录设置
max_history_records: 1000
auto_cleanup_days: 30
```

## API密钥申请

1. 访问[高德开放平台](https://console.amap.com/dev/key/app)
2. 注册并登录账号
3. 创建新应用
4. 申请"Web服务API"密钥
5. 将密钥配置到应用中

## 故障排除

### 常见问题

1. **API调用失败**
   - 检查API密钥是否正确
   - 确认网络连接正常
   - 查看API配额是否用完

2. **坐标格式错误**
   - 确保使用"经度,纬度"格式
   - 经度范围：-180到180
   - 纬度范围：-90到90

3. **应用启动失败**
   - 检查Python版本（需要3.8+）
   - 确认uv已正确安装
   - 查看依赖是否完整安装

### 日志查看

应用运行时的错误信息会显示在控制台中，如果遇到问题，请查看控制台输出。

## 开发说明

### 项目结构

```
Integrated_Tools/
├── app/
│   ├── ui/
│   │   └── amap_tool.py      # 主界面
│   └── utils/
│       └── coordinate_converter.py  # 坐标转换
├── config.py                 # 配置管理
├── history_manager.py        # 历史记录管理
├── amap_api.py              # API调用封装
├── main.py                  # 应用入口
├── requirements.txt         # 依赖列表
├── start_amap_tool.bat     # 快速启动脚本
└── README.md               # 说明文档
```

### 扩展功能

如需添加新功能，可以：

1. 在`amap_api.py`中添加新的API调用方法
2. 在`amap_tool.py`中添加对应的UI界面
3. 更新配置文件结构（如需要）

## 许可证

本项目仅供个人学习和使用。使用高德地图API需要遵守[高德开放平台服务条款](https://lbs.amap.com/terms)。

## 更新日志

### v2.0.0 (个人优化版)
- ✨ 新增收藏位置管理功能
- ✨ 新增历史记录功能
- ✨ 新增个性化配置管理
- ✨ 新增真实API调用支持
- ✨ 新增快速启动脚本
- 🔧 优化界面布局和用户体验
- 🔧 改进错误处理和日志记录
- 📝 完善文档和使用说明

### v1.0.0 (基础版)
- 基础路径规划功能
- 地址查询功能
- 天气查询功能
- 批量处理功能